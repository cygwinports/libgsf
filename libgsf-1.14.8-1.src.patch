--- origsrc/libgsf-1.14.8/Makefile.am	2007-07-27 07:14:48.000000000 -0500
+++ src/libgsf-1.14.8/Makefile.am	2008-03-08 22:57:10.250000000 -0600
@@ -1,4 +1,4 @@
-ACLOCAL_AMFLAGS = -I m4 $(ACLOCAL_FLAGS)
+ACLOCAL_AMFLAGS = -I m4
 
 pkgconfigdir = $(libdir)/pkgconfig
 pkgconfig_DATA = libgsf-1.pc
--- origsrc/libgsf-1.14.8/configure.in	2007-09-07 20:18:55.000000000 -0500
+++ src/libgsf-1.14.8/configure.in	2008-03-08 22:57:10.250000000 -0600
@@ -296,6 +296,12 @@
 	fi
     fi
 
+	have_pyorbit=false
+	PKG_CHECK_MODULES(PYORBIT, pyorbit-2 >= 2.14.0, 
+		have_pyorbit=true,
+		AC_MSG_WARN([PyORBit required for Python gsf-gnome bindings.]))
+	AC_SUBST(PYORBIT_CFLAGS)
+
     if test "$pygobject_msg" = test; then
 	pygobject_msg=yes
     fi
@@ -305,6 +311,7 @@
 fi
 
 AM_CONDITIONAL(WITH_PYTHON, [test "$pygobject_msg" = yes])
+AM_CONDITIONAL(WITH_PYORBIT, [test "$have_pyorbit" = true])
 
 dnl ***********************************************************************************
 
--- origsrc/libgsf-1.14.8/doc/gsf.types	2008-03-05 20:29:10.000000000 -0600
+++ src/libgsf-1.14.8/doc/gsf.types	2008-03-08 22:57:10.265625000 -0600
@@ -75,7 +75,6 @@
 gsf_output_iochannel_get_type
 gsf_output_memory_get_type
 gsf_output_stdio_get_type
-gsf_shared_memory_get_type
 gsf_structured_blob_get_type
 gsf_timestamp_get_type
 gsf_xml_out_get_type
--- origsrc/libgsf-1.14.8/m4/python.m4	2007-05-29 20:20:26.000000000 -0500
+++ src/libgsf-1.14.8/m4/python.m4	2008-03-08 22:57:10.265625000 -0600
@@ -46,10 +46,12 @@
 py_prefix=`$PYTHON -c "import sys; print sys.prefix"`
 py_exec_prefix=`$PYTHON -c "import sys; print sys.exec_prefix"`
 PYTHON_INCLUDES="-I${py_prefix}/include/python${PYTHON_VERSION}"
+PYTHON_LIBS="-L${py_exec_prefix}/lib/python${PYTHON_VERSION}/config -lpython${PYTHON_VERSION}"
 if test "$py_prefix" != "$py_exec_prefix"; then
   PYTHON_INCLUDES="$PYTHON_INCLUDES -I${py_exec_prefix}/include/python${PYTHON_VERSION}"
 fi
 AC_SUBST(PYTHON_INCLUDES)
+AC_SUBST(PYTHON_LIBS)
 dnl check if the headers exist:
 save_CPPFLAGS="$CPPFLAGS"
 CPPFLAGS="$CPPFLAGS $PYTHON_INCLUDES"
--- origsrc/libgsf-1.14.8/python/Makefile.am	2006-12-31 20:41:29.000000000 -0600
+++ src/libgsf-1.14.8/python/Makefile.am	2008-03-08 22:57:10.265625000 -0600
@@ -10,19 +10,21 @@
 pygsfexec_LTLIBRARIES =
 
 if WITH_LIBGSF_GNOME
+if WITH_PYORBIT
   pygsfexec_LTLIBRARIES += gnomemodule.la
 endif
+endif
 
 pygsfexec_LTLIBRARIES += _gsfmodule.la
 
 gnomemodule_la_CFLAGS = \
 	-I$(top_srcdir)		\
-	$(LIBGSF_CFLAGS) $(LIBGSF_GNOME_CFLAGS) $(ORBIT_PYTHON_CFLAGS)
-gnomemodule_la_LDFLAGS = -module -avoid-version -export-symbols-regex initgnome
+	$(LIBGSF_CFLAGS) $(LIBGSF_GNOME_CFLAGS) $(PYORBIT_CFLAGS)
+gnomemodule_la_LDFLAGS = -module -avoid-version -no-undefined -export-symbols-regex initgnome
 gnomemodule_la_LIBADD = \
 	$(top_builddir)/gsf-gnome/libgsf-gnome-1.la	\
 	$(top_builddir)/gsf/libgsf-1.la			\
-	$(LIBGSF_LIBS) $(LIBGSF_GNOME_LIBS)
+	$(LIBGSF_LIBS) $(LIBGSF_GNOME_LIBS) $(PYTHON_LIBS)
 gnomemodule_la_SOURCES = gsfgnomemodule.c
 nodist_gnomemodule_la_SOURCES = gsfgnome.c
 CLEANFILES += gsfgnome.c
@@ -32,8 +34,8 @@
 _gsfmodule_la_CFLAGS = 		\
 	-I$(top_srcdir)		\
 	$(LIBGSF_CFLAGS)
-_gsfmodule_la_LDFLAGS = -module -avoid-version -export-symbols-regex init_gsf
-_gsfmodule_la_LIBADD = $(top_builddir)/gsf/libgsf-1.la $(LIBGSF_LIBS)
+_gsfmodule_la_LDFLAGS = -module -avoid-version -no-undefined -export-symbols-regex init_gsf
+_gsfmodule_la_LIBADD = $(top_builddir)/gsf/libgsf-1.la $(LIBGSF_LIBS) $(PYTHON_LIBS)
 _gsfmodule_la_SOURCES = gsfmodule.c
 nodist__gsfmodule_la_SOURCES = gsf.c
 CLEANFILES += gsf.c
--- origsrc/libgsf-1.14.8/python/gsfgnome.override	2007-01-23 20:20:38.000000000 -0600
+++ src/libgsf-1.14.8/python/gsfgnome.override	2008-03-08 22:57:10.265625000 -0600
@@ -5,6 +5,7 @@
 
 #define NO_IMPORT_PYGOBJECT
 #include "pygobject.h"
+#include "pyorbit.h"
 #include <gsf/gsf-input.h>
 #include <gsf-gnome/gsf-input-bonobo.h>
 #include <gsf-gnome/gsf-input-gnomevfs.h>
@@ -43,15 +44,11 @@
 				     (char *) "O:GsfInputBonobo.__init__",
 				     kwlist, &stream))
         return -1;
-#if 1
-    /* See http://bugzilla.gnome.org/show_bug.cgi?id=382254 */
-    return -1;
-#else
-    if (!PyORBit_Object_Check(stream)) {
+    if (!PyObject_TypeCheck(stream, &PyCORBA_Object_Type)) {
         PyErr_SetString(PyExc_TypeError, "stream must be a CORBA.Object");
         return -1;
     }
-    self->obj = (GObject *)gsf_input_bonobo_new((CORBA_Object)PyORBit_Object_Get(stream), &err);
+    self->obj = (GObject *)gsf_input_bonobo_new((PyCORBA_Object *)stream, &err);
     if (pyg_error_check(&err))
         return -1;
 
@@ -61,7 +58,6 @@
     }
     pygobject_register_wrapper((PyObject *)self);
     return 0;
-#endif
 }
 %%
 override gsf_output_bonobo_new kwargs
@@ -74,15 +70,11 @@
 
     if (!PyArg_ParseTupleAndKeywords(args, kwargs, "O:GsfOutputBonobo.__init__", kwlist, &stream))
         return -1;
-#if 1
-    /* See http://bugzilla.gnome.org/show_bug.cgi?id=382254 */
-    return -1;
-#else
-    if (!PyORBit_Object_Check(stream)) {
+    if (!PyObject_TypeCheck(stream, &PyCORBA_Object_Type)) {
         PyErr_SetString(PyExc_TypeError, "stream must be a CORBA.Object");
         return -1;
     }
-    self->obj = (GObject *)gsf_output_bonobo_new((CORBA_Object)PyORBit_Object_Get(stream), &err);
+    self->obj = (GObject *)gsf_output_bonobo_new((PyCORBA_Object *)stream, &err);
     if (pyg_error_check(&err))
         return -1;
 
@@ -92,5 +84,4 @@
     }
     pygobject_register_wrapper((PyObject *)self);
     return 0;
-#endif
 }
